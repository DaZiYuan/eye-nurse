<template>
  <footer class="bg-white">
    <div class="max-w-7xl mx-auto py-12 px-4 overflow-hidden sm:px-6 lg:px-8">
      <div class="mt-8 flex justify-center space-x-6">
        <a v-for="item in navigation" rel="noopener noreferrer"
          :target="item.openExternal === true ? '_blank' : '_self'" :key="item.name" :href="item.href"
          class="text-gray-400 hover:text-gray-500">
          <span class="sr-only">{{ item.name }}</span>
          <component :is="item.icon" class="h-6 w-6" aria-hidden="true" />
        </a>
        <!-- 多语言切换  -->
        <Listbox v-model="locale">
          <div class="-mt-2 relative w-28">
            <ListboxButton
              class="relative w-full cursor-default rounded-lg bg-white py-2 pl-3 pr-10 text-left shadow-md focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm">
              <span class="block truncate text-gray-600">{{ t(locale) }}</span>
              <span class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2">
                <SelectorIcon class="h-5 w-5 text-gray-400" aria-hidden="true" />
              </span>
            </ListboxButton>

            <transition leave-active-class="transition duration-100 ease-in" leave-from-class="opacity-100"
              leave-to-class="opacity-0">
              <ListboxOptions
                class="absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm">
                <ListboxOption v-slot="{ active, selected }" v-for="item in $i18n.availableLocales"
                  :key="`locale-${item}`" :value="item" as="template">
                  <li :class="[
                    active ? 'bg-teal-100 text-teal-900' : 'text-gray-900',
                    'relative cursor-default select-none py-2 pl-10 pr-4',
                  ]">
                    <span :class="[
                      selected ? 'font-medium' : 'font-normal',
                      'block truncate',
                    ]">{{ t(item) }}</span>
                    <span v-if="selected" class="absolute inset-y-0 left-0 flex items-center pl-3 text-teal-600">
                      <CheckIcon class="h-5 w-5" aria-hidden="true" />
                    </span>
                  </li>
                </ListboxOption>
              </ListboxOptions>
            </transition>
          </div>
        </Listbox>
      </div>
      <p class="mt-8 text-center">
        <a href="https://giantapp.cn" target="_blank" class="text-base text-gray-400" v-html="t('copyright')" />
      </p>
    </div>
  </footer>
</template>
<script lang="ts" setup>
import { CheckIcon, SelectorIcon } from "@heroicons/vue/solid";
import { defineComponent, h, ref, watch } from "vue";
import * as client from "../../../lib/client";
import {
  Listbox,
  ListboxButton,
  ListboxOptions,
  ListboxOption,
} from "@headlessui/vue";
import { useI18n } from "vue-i18n";

const { t, locale } = useI18n();
watch(locale, async (newLocale) => {
  localStorage.setItem("locale", newLocale);
  await client.SetCurrentLanguage(newLocale);
});

const navigation = [
  {
    name: "GitHub",
    openExternal: true,
    href: "https://github.com/DaZiYuan/eye-nurse",
    icon: defineComponent({
      render: () =>
        h("svg", { fill: "currentColor", viewBox: "0 0 1024 1024" }, [
          h("path", {
            d: "M279.04 714.24a42.666667 42.666667 0 1 1 53.461333-66.474667l90.453334 72.789334a42.666667 42.666667 0 0 1 13.994666 45.952c-11.648 37.205333-20.266667 65.066667-25.856 83.541333l-5.973333 20.181333c-3.669333 21.162667-18.773333 38.144-42.709333 38.144a994.133333 994.133333 0 0 1-15.786667-5.461333C189.226667 838.698667 85.333333 684.885333 85.333333 511.957333 85.333333 276.352 276.352 85.333333 512 85.333333s426.666667 191.018667 426.666667 426.666667a426.666667 426.666667 0 0 1-260.437334 392.96c-5.802667 2.304-11.349333 3.413333-16.64 3.413333-23.978667 0-39.04-16.981333-42.112-35.882666a3806.933333 3806.933333 0 0 0-16.213333-53.930667 30942.72 30942.72 0 0 0-56.149333-179.029333 42.666667 42.666667 0 0 1 21.376-50.901334c50.346667-25.514667 71.509333-51.072 71.509333-76.672 0-13.909333-5.333333-27.648-15.872-40.362666a42.666667 42.666667 0 0 1-8.618667-37.632l0.768-3.072-5.546666 3.328a42.666667 42.666667 0 0 1-37.034667 3.328A174.805333 174.805333 0 0 0 512 426.624c-21.930667 0-42.922667 3.84-61.696 10.922667a42.666667 42.666667 0 0 1-37.034667-3.328l-5.546666-3.328 0.768 3.072a42.666667 42.666667 0 0 1-8.618667 37.632c-10.538667 12.714667-15.872 26.453333-15.872 40.362666 0 25.6 21.12 51.157333 71.509333 76.672a42.666667 42.666667 0 1 1-38.570666 76.117334C340.778667 626.176 298.666667 575.274667 298.666667 512c0-27.178667 7.808-53.205333 22.229333-76.458667L299.946667 351.658667c-9.216-36.864 30.72-66.474667 63.317333-46.933334l77.226667 46.293334A264.277333 264.277333 0 0 1 512 341.333333c24.661333 0 48.768 3.285333 71.552 9.685334l77.184-46.293334c32.554667-19.541333 72.533333 10.069333 63.317333 46.933334l-20.949333 83.882666A144.213333 144.213333 0 0 1 725.333333 511.957333c0 53.845333-30.506667 98.730667-86.485333 134.698667a26941.482667 26941.482667 0 0 1 49.322667 157.738667A341.333333 341.333333 0 0 0 512 170.666667a341.333333 341.333333 0 0 0-176.128 633.728l11.008-35.584-67.84-54.613334z",
          }),
        ]),
    }),
  },
  {
    name: "Bilibili",
    openExternal: true,
    href: "https://space.bilibili.com/32676827",
    icon: defineComponent({
      render: () =>
        h("svg", { fill: "currentColor", viewBox: "0 0 1024 1024" }, [
          h("path", {
            d: "M777.514667 131.669333a53.333333 53.333333 0 0 1 0 75.434667L728.746667 255.829333h49.92A160 160 0 0 1 938.666667 415.872v320a160 160 0 0 1-160 160H245.333333A160 160 0 0 1 85.333333 735.872v-320a160 160 0 0 1 160-160h49.749334L246.4 207.146667a53.333333 53.333333 0 1 1 75.392-75.434667l113.152 113.152c3.370667 3.370667 6.186667 7.04 8.448 10.965333h137.088c2.261333-3.925333 5.12-7.68 8.490667-11.008l113.109333-113.152a53.333333 53.333333 0 0 1 75.434667 0z m1.152 231.253334H245.333333a53.333333 53.333333 0 0 0-53.205333 49.365333l-0.128 4.010667v320c0 28.117333 21.76 51.157333 49.365333 53.162666l3.968 0.170667h533.333334a53.333333 53.333333 0 0 0 53.205333-49.365333l0.128-3.968v-320c0-29.44-23.893333-53.333333-53.333333-53.333334z m-426.666667 106.666666c29.44 0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333 0 1 1-106.666666 0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z m320 0c29.44 0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333 0 1 1-106.666666 0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z",
          }),
        ]),
    }),
  },
  {
    name: "YouTube",
    openExternal: true,
    href: "https://www.youtube.com/channel/UCS-nZhrfAz0osmKm2AchvFA",
    icon: defineComponent({
      render: () =>
        h("svg", { fill: "currentColor", viewBox: "0 0 1024 1024" }, [
          h("path", {
            d: "M408.768 765.056a43.52 43.52 0 0 1-23.488-6.4 48.192 48.192 0 0 1-23.488-41.344V350.976c0-17.536 9.408-33.472 23.488-41.408a49.088 49.088 0 0 1 46.912 0l311.36 183.168c14.08 7.936 23.424 23.872 23.424 41.408a47.68 47.68 0 0 1-23.424 41.408l-311.36 183.168c-7.808 3.2-15.616 6.4-23.424 6.4z m46.912-332.8v200.64L626.176 532.48 455.68 432.192z",
          }),
          h("path", {
            d: "M821.76 938.688H203.776c-89.152 0-161.088-73.28-161.088-164.032v-482.56C42.688 201.152 114.56 128 203.776 128h617.984c87.616 0 159.552 73.28 159.552 164.032v484.16c0 89.216-71.936 162.496-159.552 162.496zM203.776 223.552c-37.504 0-67.2 30.272-67.2 68.48v484.16c0 38.272 29.696 68.48 67.2 68.48h617.984c37.568 0 67.264-30.208 67.264-68.48V292.032c-1.536-38.208-31.296-68.48-67.264-68.48H203.776z",
          }),
        ]),
    }),
  },
  {
    name: "订阅号",
    href: "https://giantapp.cn/images/dyh.png",
    openExternal: true,
    icon: defineComponent({
      render: () =>
        h("svg", { fill: "currentColor", viewBox: "0 0 1024 1024" }, [
          h("path", {
            d: "M718.933333 352h-23.466666c-32-147.2-177.066667-256-345.6-256-192 0-349.866667 142.933333-349.866667 320 0 66.133333 21.333333 130.133333 64 183.466667V768c0 32 19.2 42.666667 25.6 44.8 4.266667 2.133333 8.533333 2.133333 14.933333 2.133333 10.666667 0 21.333333-4.266667 36.266667-17.066666l85.333333-85.333334c68.266667 23.466667 147.2 27.733333 219.733334 8.533334 49.066667 87.466667 153.6 147.2 275.2 147.2 34.133333 0 66.133333-4.266667 98.133333-12.8l66.133333 57.6c12.8 10.666667 25.6 14.933333 34.133334 14.933333 8.533333 0 12.8-2.133333 17.066666-4.266667 8.533333-4.266667 25.6-14.933333 25.6-44.8v-108.8c40.533333-44.8 64-102.4 64-160-2.133333-140.8-138.666667-258.133333-307.2-258.133333z m-298.666666 311.466667c-64 12.8-130.133333 8.533333-189.866667-17.066667-12.8-4.266667-25.6-2.133333-34.133333 6.4L128 723.2v-134.4c0-8.533333-2.133333-14.933333-6.4-21.333333-38.4-42.666667-57.6-96-57.6-151.466667 0-140.8 130.133333-256 288-256 136.533333 0 253.866667 87.466667 281.6 202.666667-125.866667 32-219.733333 130.133333-219.733333 249.6 0 17.066667 2.133333 34.133333 6.4 51.2z m484.266666 72.533333c-6.4 6.4-8.533333 14.933333-8.533333 23.466667v83.2l-51.2-44.8c-6.4-4.266667-12.8-8.533333-21.333333-8.533334-4.266667 0-6.4 0-10.666667 2.133334-29.866667 10.666667-61.866667 14.933333-93.866667 14.933333-132.266667 0-241.066667-87.466667-241.066666-196.266667s108.8-196.266667 241.066666-196.266666c132.266667 0 238.933333 87.466667 238.933334 196.266666 2.133333 46.933333-17.066667 89.6-53.333334 125.866667z",
          }),
          h("path", {
            d: "M800 576m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z",
          }),
          h("path", {
            d: "M640 576m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z",
          }),
          h("path", {
            d: "M465.066667 366.933333m-46.933334 0a46.933333 46.933333 0 1 0 93.866667 0 46.933333 46.933333 0 1 0-93.866667 0Z",
          }),
          h("path", {
            d: "M273.066667 366.933333m-46.933334 0a46.933333 46.933333 0 1 0 93.866667 0 46.933333 46.933333 0 1 0-93.866667 0Z",
          }),
        ]),
    }),
  },
];
</script>
